# pytest.ini
# Configuration file for pytest
#
# This file configures pytest behavior for the Chapter 4 examples.
# It should be placed in the root of your test directory.

[pytest]
# ============================================================================
# MARKER REGISTRATION
# ============================================================================
# Register custom markers to avoid warnings and provide documentation
# Format: marker_name: description

markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests (require external resources)
    unit: marks tests as unit tests (fast, isolated tests)
    smoke: marks tests as smoke tests for quick validation
    api: marks tests that interact with external APIs
    timeout: sets a timeout for a test (requires pytest-timeout plugin)
    xdist_group: assigns tests to a group for pytest-xdist execution control
    
# ============================================================================
# TEST DISCOVERY
# ============================================================================
# Patterns for discovering test files and functions

# Where to look for tests
testpaths = .

# Python files that contain tests
python_files = test_*.py *_test.py

# Python classes that contain tests
python_classes = Test* *Tests

# Python functions that are tests
python_functions = test_*

# ============================================================================
# OUTPUT AND REPORTING
# ============================================================================

# Add extra information to test output
addopts = 
    # Show extra test summary info for all test outcomes
    -ra
    # Show local variables in tracebacks
    --tb=short
    # Strict markers: fail if undefined marker is used
    --strict-markers
    # Show warnings
    -W default

# Minimum Python version required
minversion = 3.8

# ============================================================================
# PLUGIN CONFIGURATION
# ============================================================================

# pytest-timeout: Set default timeout for all tests (in seconds)
# Individual tests can override with @pytest.mark.timeout(seconds)
# timeout = 300
# timeout_method = thread

# pytest-cov: Code coverage options (uncomment to enable by default)
# addopts = 
#     --cov=.
#     --cov-report=html
#     --cov-report=term-missing:skip-covered
#     --cov-fail-under=80

# pytest-xdist: Parallel execution (usually set via command line)
# Uncomment to always run tests in parallel
# addopts = -n auto

# ============================================================================
# EXAMPLE USAGE
# ============================================================================
# 
# Run all tests:
#   pytest
#
# Run with verbose output:
#   pytest -v
#
# Run only tests marked as 'unit':
#   pytest -m unit
#
# Run everything except slow tests:
#   pytest -m "not slow"
#
# Run integration or API tests:
#   pytest -m "integration or api"
#
# Run fast unit tests only:
#   pytest -m "unit and not slow"
#
# List all registered markers:
#   pytest --markers
#
# Show reasons for skipped tests:
#   pytest -rs
#
# Show expected failures:
#   pytest -rx
#
# ============================================================================
# PLUGIN USAGE EXAMPLES
# ============================================================================
#
# Run with timeout (requires pytest-timeout):
#   pytest --timeout=30
#
# Run tests in parallel (requires pytest-xdist):
#   pytest -n auto              # Use all available CPUs
#   pytest -n 4                 # Use 4 workers
#   pytest --dist loadfile      # Distribute by file
#
# Run with coverage (requires pytest-cov):
#   pytest --cov=.
#   pytest --cov=. --cov-report=html
#   pytest --cov=. --cov-report=term-missing
#
# Generate HTML report (requires pytest-html):
#   pytest --html=report.html --self-contained-html
#
# Combine plugins:
#   pytest -n auto --timeout=60 --cov=. -v
#
# Show installed plugins:
#   pytest --version
#
# ============================================================================
